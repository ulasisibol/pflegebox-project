<!DOCTYPE html>
<html>

<head>
    <!-- Scripts -->
    <script src="/js/app.js" defer></script>
    <!-- Styles -->
    <link href="/css/app.css" rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta charset="utf-8">


</head>

<body>

    <div class="header py-5">
        <!--<img class="logo" src="https://formular.curama.de/assets/img/logo_curama.png" />-->
        <div class="container">
            <div class="row justify-content-md-center">
                <div class="col-md-7">
                    <div class="menu-bars">
                        <div class="bar-content ">
                            <p>1. Box auswählen</p>
                            <div class="bar"></div>
                        </div>
                        <div class="bar-content  active ">
                            <p>2. Persönliche Daten</p>
                            <div class="bar"></div>
                        </div>
                        <div class="bar-content ">
                            <p>3. Unterschrift</p>
                            <div class="bar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="insurance-number">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <span>X</span>
                    <h1>Ihre Versichertennummer</h1>
                    <p class="my-5">Bitte tragen Sie die Versichertennummer inkl. dem Buchstaben in das dafür
                        vorgesehene Feld ein.</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container pb-5">
        <div id="error-message" class="row mb-3" style="display: none;">
            <div class="col-md-12">
                <p class="text-center"
                    style="padding: 10px; border-radius: 10px; color: white; background-color: rgba(203, 28, 28, 0.866);">
                    Bitte
                    überprüfen Sie Ihre Eingabe,
                    leider haben Sie noch
                    nicht alle Pflichtfelder ausgefüllt. Herzlichen Dank, Ihr Team von Pflegedienstbox.</p>
            </div>
        </div>
        <div class="row mb-5">
            <div class="col-md-12">
                <h1 class="text-center" style="font-size: x-large;">Antrag auf Kostenübernahme für Pflegehilfsmittel
                </h1>
                <p class="text-center">(Versorgung des Versicherten mit zum Verbrauch bestimmten Pflegehilfsmitteln
                    gemäß § 78 Abs. 1, in Verbindung mit § 40 Abs. 2 SGB XI)
                </p>

            </div>
        </div>
        <div class="row justify-content-md-center data-form">
            <div class="col-md-10">
                <form>
                    <div class="form-group">
                        <p>Anrede:</p>
                        <input id="f" name="gender-4" type="radio" value="F"> <span class="mx-2">Frau</span>
                        <input id="m" name="gender-4" type="radio" value="H"> <span class="mx-2">Herr</span>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-6">
                                <p>Name:</p>
                                <input placeholder="Name" name="name-4" type="text" value="">
                            </div>
                            <div class="col-md-6">
                                <p>Vorname:</p>
                                <input placeholder="Vorname" name="prename-4" type="text" value="">
                            </div>
                        </div>
                    </div>


                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-6">
                                <p>Straße/Nr.:</p>
                                <input placeholder="Straße und Hausnummer" name="street-4" type="text" value="">
                            </div>
                            <div class="col-md-6">
                                <p>PLZ/Ort:</p>
                                <input placeholder="Adresszusatz" name="plz-city-4" type="text" value="">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-6">
                                <p>Geb.-Datum:</p>
                                <input placeholder="Geburtsdatum" name="birthday-4" type="text" value="">
                            </div>
                            <div class="col-md-6">
                                <p>Pflegekasse: </p>
                                <input placeholder="Pflegekasse" name="pflegekasse-4" type="text" value="">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-md-6">
                                <p>Versicherten-Nr.:</p>
                                <input placeholder="Zur Identifizierung bei Ihrer Krankenkasse" name="versicherten-4"
                                    type="text" value="">
                            </div>
                            <div class="col-md-6">
                            </div>
                        </div>
                    </div>

                    <div class="clearfix">
                        <a href="form-page-4.html" class="submit-button float-left mr-3 back-button back">Zurück</a>
                        <button class="submit-button float-left" type="submit">Weiter</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.querySelectorAll('input[type="radio"]').forEach(function (radio) {
            // İlk tıklama sırasında radio butonunun mevcut durumunu saklamak için bir özellik ekleyin
            radio.addEventListener('mousedown', function () {
                this.dataset.wasChecked = this.checked;
            });

            radio.addEventListener('click', function () {
                // Eğer radio butonu zaten seçiliyse, seçimini kaldır ve LocalStorage kaydını sil
                if (this.dataset.wasChecked === 'true') {
                    this.checked = false;
                    localStorage.removeItem(this.name);
                } else {
                    // Eğer radio butonu daha önce seçili değilse, normal davranışı izle ve LocalStorage'a kaydet
                    localStorage.setItem(this.name, this.value);
                }
            });
        });
        // Form elemanlarını seçme
        const form = document.querySelector('form');
        const inputs = form.querySelectorAll('input');
        const selects = form.querySelectorAll('select');

        // Form gönderildiğinde çalışacak fonksiyon
        form.addEventListener('submit', function (event) {
            event.preventDefault(); // Sayfanın yeniden yüklenmesini engelle

            // Form elemanlarını local storage'a kaydetme
            inputs.forEach(input => {
                if (input.type !== 'radio' || input.checked) {
                    localStorage.setItem(input.name, input.value);
                }
            });
            selects.forEach(select => {
                localStorage.setItem(select.name, select.value);
            });

            // Opsiyonel olarak local storage'ı temizleme (test amacıyla)
            // localStorage.clear();
        });


        document.querySelector('form').addEventListener('submit', function (event) {
            // Form gönderilmeden önce boş alan kontrolü yapılıyor
            var formInputs = document.querySelectorAll('input[type="text"], input[type="radio"]:checked, select');
            var isEmpty = false;

            formInputs.forEach(function (input) {
                if (input.value.trim() === '') {
                    isEmpty = true;
                }
            });

            // Boş alan varsa formun gönderilmesini engelle
            if (isEmpty) {
                event.preventDefault();
                document.getElementById('error-message').style.display = 'block';
            } else {
                // Tüm alanlar dolu ise index2.html sayfasına yönlendir
                window.location.href = 'form-page-6.html';
            }
        });

        document.addEventListener('DOMContentLoaded', function () {
            const form = document.querySelector('form');

            // localStorage'dan form verilerini alıp form alanlarına yerleştirme
            function loadFormDataFromLocalStorage() {
                const inputs = form.querySelectorAll('input');
                const selects = form.querySelectorAll('select');

                // Input alanlarına localStorage'dan değerleri yerleştirme
                inputs.forEach(input => {
                    const savedValue = localStorage.getItem(input.name);
                    if (savedValue !== null) {
                        if (input.type === 'checkbox' || input.type === 'radio') {
                            input.checked = savedValue === input.value;
                        } else {
                            input.value = savedValue;
                        }
                    }
                });

                // Select alanlarına localStorage'dan değerleri yerleştirme
                selects.forEach(select => {
                    const savedValue = localStorage.getItem(select.name);
                    if (savedValue !== null) {
                        select.value = savedValue;
                    }
                });
            }

            // Sayfa yüklendiğinde localStorage'dan form verilerini yükleme
            loadFormDataFromLocalStorage();

            // Form gönderildiğinde form verilerini localStorage'a kaydetme
            form.addEventListener('submit', function (event) {
                const formData = new FormData(form);
                formData.forEach((value, key) => {
                    localStorage.setItem(key, value);
                });
            });
        });

    </script>

</body>

</html>